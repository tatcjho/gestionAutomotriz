<div class="main-content">
    <div class="container-fluid">
                <button type="button" class="btn btn-primary btn-sm  btn-fill btn-new" (click)="newPromotion()" data-toggle="modal"
                    data-target="#modalPromotion">
                    <i class="fa fa-plus"></i> &nbsp; Crear Promoción.
                </button>

    </div>

    <div class="card">
        <mat-form-field class="pl-5 pr-5">
            <mat-label>Buscar</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ejemplo" #input>
        </mat-form-field>
        <div class="mat-elevation-z8">
            <table mat-table [dataSource]="dataSource" matSort matTableResponsive  >

                <!-- Id -->
                <ng-container matColumnDef="id" class="display-row-center">
                    <th mat-header-cell *matHeaderCellDef  mat-sort-header class="text-center pl-5"> N°
                    </th>
                    <td mat-cell *matCellDef="let row" class="text-center"> {{row.promotion_id}}</td>
                </ng-container>
                <!--  Nombre -->
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef  class="text-center"> Título
                    </th>
                    <td mat-cell *matCellDef="let row" class="text-center">
                     {{row.promotion_name}}
                    </td>

                </ng-container>
               
                <!--  Descripción -->
                <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef  class="text-center"> Descripción
                    </th>
                    <td mat-cell *matCellDef="let row" class="text-center">
                     {{row.promotion_description}}
                    </td>

                </ng-container>
              
                 <!--  date -->
                 <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef class="text-center"> Día
                    </th>
                    <td mat-cell *matCellDef="let row" class="text-center">
                     {{row.promotion_date}}
                    </td>

                </ng-container>
                  <!--  time  -->
                  <ng-container matColumnDef="time">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center pl-5"> Hora
                    </th>
                    <td mat-cell *matCellDef="let row" class="text-center">
                     {{row.promotion_time}}
                    </td>

                </ng-container>
                  <!--  status -->
                  <!-- <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef class="text-center"> Estatus
                    </th>
                    <td mat-cell *matCellDef="let row" class="text-center">
                     {{row.promotion_status}}
                    </td>

                </ng-container> -->
                 <!--  Editar -->
                 <ng-container matColumnDef="edit">
                    <th mat-header-cell *matHeaderCellDef  class="padding text-center">
                        Editar</th>
                    <td mat-cell *matCellDef="let row" class="text-center">
                      <span class="material-icons text-warning cursor-pointer" (click)="editPromotion(row)" data-toggle="modal"
                      data-target="#modalPromotion">
                        mode_edit
                        </span>
                    </td>
                </ng-container>
                <!--  ELIMINAR -->
                <ng-container matColumnDef="delete">
                    <th mat-header-cell *matHeaderCellDef  class="padding text-center">
                        Eliminar</th>
                    <td mat-cell *matCellDef="let row" class="text-center">
                      <span class="material-icons text-danger cursor-pointer" (click)="deletePromotion(row)">
                        delete_sweep
                        </span>
                       
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                </tr>
            </table>

            <mat-paginator #promotions [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
        </div>
    </div>
</div>

  <!-- MODAL NEW PROMOTION-->
  <div class="modal fade" id="modalPromotion" tabindex="-1" role="dialog" aria-labelledby="modalPromotionLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document" style="min-width: 80%;min-height: 80%;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalNotificationLabel">{{isEdit?'Editar promoción.':'Crear  promoción.'}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #formPromotion="ngForm" action="" class="form-horizontal"
          (ngSubmit)='addPromotion(formPromotion.value, formPromotion.valid, formPromotion)' novalidate action="/" method="get">
          <div class="row pt-2">
            <div class="col-sm-2">
              <input disabled type="text" class="form-control" name="promotion_id" id="promotion_id"
                placeholder="Id de la notificación" [(ngModel)]="promotion.promotion_id"
                #promotion_id="ngModel" required pattern="">
              <small [hidden]="promotion_id.valid || (promotion_id.pristine && !formPromotion.submitted)"
                class="text-danger">
                Obligatorio</small>
            </div>
            <div class="col-sm-4 checkbox text-center">
                <input type="text" class="form-control" name="promotion_name" id="promotion_name"
                placeholder="Título de la notificación" [(ngModel)]="promotion.promotion_name"
                #promotion_name="ngModel" required pattern="">
              <small [hidden]="promotion_name.valid || (promotion_name.pristine && !formPromotion.submitted)"
                class="text-danger">
                Obligatorio</small>

            </div>
            <div class="col-sm-6 checkbox text-center">
                <input type="text" class="form-control" name="promotion_description" id="promotion_description"
                placeholder="Descripcción de la notificación" [(ngModel)]="promotion.promotion_description"
                #promotion_description="ngModel" required pattern="">
              <small [hidden]="promotion_description.valid || (promotion_description.pristine && !formPromotion.submitted)"
                class="text-danger">
                Obligatorio</small>
            </div>

          </div>
        <div class="row pt-3 pl-2">
            <div class="col-sm-12 text-center">
                <figure>
                    <span class="material-icons icon-img"  *ngIf="!promotion.promotion_img && !imageSrc">
                        insert_photo
                        </span>
                    <img class="img-promotion-modl"
                        *ngIf="promotion.promotion_img && imageSrc "
                        [src]="imageSrc">
                    <img class="img-promotion-modl"
                        *ngIf="promotion.promotion_img && imageSrc"
                        [src]="promotion.promotion_img">
                        <img class="img-promotion-modl"
                        *ngIf="promotion.promotion_img && !imageSrc"
                        [src]="promotion.promotion_img">
                    <img class="img-promotion-modl"
                        *ngIf="!promotion.promotion_img && imageSrc"
                        [src]="imageSrc">
                </figure>
                <input id=id type="file" class="form-control" name="promotion_img" accept="image/*"
                (change)="onChangeImage($event)" required>
               <input type="hidden" class="form-control" name="promotion_img" id="promotion_img"
                placeholder="Imagen de producto" [(ngModel)]="promotion.promotion_img"
                #promotion_img="ngModel" required pattern="" >
                <!-- <input type="file" class="form-control" name="promotion_img" id="promotion_img"
                    placeholder="Imagen del producto" [(ngModel)]="promotion.promotion_img" #promotion_img="ngModel" required
                    pattern=""  (change)="onChangeImage($event)"> -->
                <small [hidden]="promotion_img.valid || (promotion_img.pristine && !formPromotion.submitted)"
                    class="text-danger">
                    Obligatorio</small>
            </div>
          
        </div>
  
         
          
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success btn-fill btn-sm" (click)="addPromotion(formPromotion.value, formPromotion.valid, formPromotion)"> Guardar</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
